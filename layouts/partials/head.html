<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	{{ if .IsPage }}
	<meta name="description" content="{{ .Summary }}" />
	{{ end }}

	<title>
		{{ if not .IsHome }} {{ .Title }} {{ else }} {{ $.Site.Title }} {{ end
		}}
	</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
	<link rel="shortcut icon" type="image/x-icon" href="{{ $.Site.Params.favicon | absURL }}" />
	{{ $options := (dict "outputStyle" "compressed" "enableSourceMap" (not
	hugo.IsProduction)) }} {{ $sass := resources.Get "css/main.scss" }} {{
	$style := $sass | css.Sass $options | resources.Fingerprint "sha512" }}
	<link rel="stylesheet" href="{{ $style.Permalink | relURL }}" integrity="{{ $style.Data.Integrity }}" />
	{{ if .Params.mathjax }} {{ partial "mathjax.html" . }} {{ end }}
	<!-- Matomo -->
	<script>
		var _paq = (window._paq = window._paq || []);
		/* tracker methods like "setCustomDimension" should be called before "trackPageView" */
		_paq.push(["trackPageView"]);
		_paq.push(["enableLinkTracking"]);
		(function () {
			var u = "https://underschorehao.matomo.cloud/";
			_paq.push(["setTrackerUrl", u + "matomo.php"]);
			_paq.push(["setSiteId", "1"]);
			var d = document,
				g = d.createElement("script"),
				s = d.getElementsByTagName("script")[0];
			g.async = true;
			g.src =
				"https://cdn.matomo.cloud/underschorehao.matomo.cloud/matomo.js";
			s.parentNode.insertBefore(g, s);
		})();
	</script>
	<!-- End Matomo Code -->
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			const toggleButton = document.getElementById("appearance-toggle");
			const currentTheme = localStorage.getItem("theme") || "auto";

			function updateIcon(theme) {
				if (theme === "dark") {
					toggleButton.classList.add("dark-mode");
					toggleButton.classList.remove("light-mode");
				} else {
					toggleButton.classList.add("light-mode");
					toggleButton.classList.remove("dark-mode");
				}
			}

			if (currentTheme === "dark") {
				document.body.setAttribute("a", "dark");
				updateIcon("dark");
			} else if (currentTheme === "light") {
				document.body.setAttribute("a", "light");
				updateIcon("light");
			} else {
				document.body.setAttribute("a", "auto");
				updateIcon("auto");
			}

			toggleButton.addEventListener("click", function () {
				let theme = document.body.getAttribute("a");
				if (theme === "dark") {
					document.body.setAttribute("a", "light");
					localStorage.setItem("theme", "light");
					updateIcon("light");
				} else {
					document.body.setAttribute("a", "dark");
					localStorage.setItem("theme", "dark");
					updateIcon("dark");
				}
			});
		});
	</script>
</head>